!function(t){var s=function(t,s){this.storage=t,this.storageKey=s,this.status=JSON.parse(this.storage.getItem(this.storageKey))||[]};s.prototype.addId=function(t){this.status.indexOf(t)<0&&this.status.push(t),this.storage.setItem(this.storageKey,JSON.stringify(this.status))},s.prototype.removeId=function(t){this.status.indexOf(t)>-1&&this.status.splice(this.status.indexOf(t),1),this.storage.setItem(this.storageKey,JSON.stringify(this.status))},s.prototype.setStatus=function(t){this.status=t},s.prototype.hasId=function(t){return this.status.indexOf(t)>-1};var e=new s(localStorage,"fukubaya.github.io/tif"),a=["HOT STAGE","HEAT GARAGE","SMILE GARDEN","DOLL FACTORY","SKY STAGE","FESTIVAL STAGE","DREAM STAGE","フジさんのヨコ STAGE","INFO CENTRE","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T"],i=function(t){return parseFloat(t.substring(0,2))+parseFloat(t.substring(2,4))/60},r=function(t,s){return parseInt(t.substring(0,2))+":"+t.substring(2,4)+"〜"+parseInt(s.substring(0,2))+":"+s.substring(2,4)},n=function(t,s){var n=[];for(var o in s){var u=a.indexOf(o);if(!(u<0))for(var d=0;d<s[o].length;d++){var c=s[o][d],l=[t,c.start,c.end,c.artist].join("-");n.push({id:l,className:e.hasId(l)?"checked":null,startTime:i(c.start),duration:i(c.end)-i(c.start),column:u,period:r(c.start,c.end),title:c.artist,detail:"null"==c.detail?"":c.detail})}}return n},o=function(s){return{headers:a,cardTemplate:"<div>${period}<br/>${title}<br/><br/>${detail}</div>",lineHeight:100,tasks:s,lowerHour:9,upperHour:22,columnWidth:120,onClick:function(s,a){var i=s.currentTarget;console.log(s,a),t(i).toggleClass("checked"),t(i).hasClass("checked")?(a.className="checked",e.addId(a.id)):(a.className=null,e.removeId(a.id))}}};t(document).ready(function(){t.ajax({type:"GET",url:"js/time.min.json",dataType:"json",success:function(s){t.ajax({type:"GET",url:"js/greeting.time.json",dataType:"json",success:function(e){var a=n("day1",s.day1).concat(n("day1",e.day1)),i=n("day2",s.day2).concat(n("day2",e.day2)),r=n("day3",s.day3).concat(n("day3",e.day3));t("#timetable-container1").skeduler(o(a)),t("#timetable-container2").skeduler(o(i)),t("#timetable-container3").skeduler(o(r))}})}})})}(jQuery);
