!function(e){function s(e){return(e<10?"0":"")+Math.floor(e)+(Math.ceil(e)>Math.floor(e)?":30":":00")}function r(e){return(o.lineHeight+o.borderWidth)*(2*e)-1}function a(e){return(o.lineHeight+o.borderWidth)*(2*(e-o.lowerHour))}function n(s){var r=o.cardTemplate;for(var a in s)s.hasOwnProperty(a)&&(r=r.replace("${"+a+"}",s[a]));return e(r)}function l(s,l){for(var t=function(e){for(var s={},r=0;r<e.length;r++){for(var a=r,n=0;0!=e[r];)r++,n++;var l=r;n&&n++;for(var t=0,o=a;o<=l;o++)e[o]=n,s[o]=t++}return{args:e,indexes:s}}(function(){for(var e=[],s=0;s<l.length-1;s++){for(var r=0,a=s+1;a<l.length&&l[s].startTime<l[a].startTime&&l[s].startTime+l[s].duration>l[a].startTime;)r++,a++;e.push(r)}return e.push(0),e}()),d=0;d<t.args.length;d++){var i=(o.columnWidth-6)/(t.args[d]||1);l[d].width=i,l[d].left=t.indexes[d]*i||4}l.forEach(function(l,t){var d=n(l),i={style:"top: "+(a(l.startTime)+2)+"px; height: "+(r(l.duration)-4)+"px; width: "+((l.width||o.columnWidth-6)-8)+"px; left: "+(l.left||4)+"px"},c=e("<div></div>").attr(i);null!=l.className&&c.addClass(l.className),c.on("click",function(e){o.onClick&&o.onClick(e,l)}),c.append(d).appendTo(s)},this)}var t={headers:[],tasks:[],cardTemplate:"<div>${id}</div>",onClick:function(e,s){},containerCssClass:"skeduler-container",headerContainerCssClass:"skeduler-headers",schedulerContainerCssClass:"skeduler-main",taskPlaceholderCssClass:"skeduler-task-placeholder",cellCssClass:"skeduler-cell",lineHeight:30,borderWidth:1,lowerHour:0,upperHour:24,columnWidth:200,debug:!1},o={};e.fn.skeduler=function(r){(o=e.extend(t,r)).debug&&console.time("skeduler");var a=e(this);a.empty(),a.addClass(o.containerCssClass);var n=e("<div></div>"),d=n.clone().addClass(o.headerContainerCssClass);o.headers.forEach(function(e){n.clone().text(e).appendTo(d)},this),a.append(d);for(var i=n.clone().addClass(o.schedulerContainerCssClass),c=n.clone().addClass(o.schedulerContainerCssClass+"-timeline"),u=n.clone().addClass(o.schedulerContainerCssClass+"-body"),C=n.clone(),h=o.lowerHour;h<o.upperHour;h++)n.clone().text(s(h)).appendTo(c),n.clone().appendTo(c),C.append(n.clone().addClass(o.cellCssClass)),C.append(n.clone().addClass(o.cellCssClass));for(var p=0;p<o.headers.length;p++){var f=C.clone(),v=n.clone().addClass(o.taskPlaceholderCssClass);l(v,o.tasks.filter(function(e){return e.column==p})),f.prepend(v),f.appendTo(u)}return i.append(c),i.append(u),a.append(i),o.debug&&console.timeEnd("skeduler"),a}}(jQuery);
